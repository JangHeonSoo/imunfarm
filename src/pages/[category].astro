---
import { getCategorySlug, getCategories, DEFAULT_LOCALE, getLocalePrefix } from '@/utils'
export async function getStaticPaths() {
	const categories = await getCategories()

	return categories.flatMap((category: string) => {
		return {
			params: {
				category: getCategorySlug(category)
			}
		}
	})
}
const params = Astro.params
const currentLocale = Astro.currentLocale ?? DEFAULT_LOCALE
const localePrefix = getLocalePrefix(currentLocale)

// Encode the URL to handle non-ASCII characters (like Korean) in redirect headers
return Astro.redirect(encodeURI(`${localePrefix}/${params.category}/1`))
---
