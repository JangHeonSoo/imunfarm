---
import { cn, sluglify, getCategoryTitleFromSlug, DEFAULT_LOCALE, getLocalePrefix } from '@/utils'

const { name = 'View All', activeCategory } = Astro.props
const currentPath = Astro.url.pathname
const currentLocale = Astro.currentLocale ?? DEFAULT_LOCALE
const localePrefix = getLocalePrefix(currentLocale)
const categoryTitle = getCategoryTitleFromSlug(name.toLowerCase())

const isActive =
	activeCategory?.toLocaleLowerCase() === categoryTitle ||
	(currentPath.replace(/\/$/, '') === (localePrefix || '/') && name === 'View All')
---

<a
	href={name === 'View All' ? `${localePrefix}/` : `${localePrefix}/${sluglify(name.toLowerCase())}/1`}
	class={cn(
		`px-6 py-2.5 rounded-full font-medium transition-all duration-300 shadow-sm`,
		isActive
			? `bg-primary text-white shadow-lg shadow-primary/30`
			: `bg-white dark:bg-gray-800 text-text-muted dark:text-gray-300 hover:bg-primary hover:text-white hover:shadow-lg hover:shadow-primary/30`
	)}
>
	{categoryTitle}
</a>
